Quadtree=function(){var e=function(e,t){function n(e,t,n,r,i){this.objects=[],this.left=e,this.top=t,this.width=n,this.height=r,this.right=this.left+this.width,this.bottom=this.top+this.height,this.isBase=this.width/2<this.minimumSize,this.parent=i}return e.exports=t,e.exports=n,n.prototype.tl=void 0,n.prototype.tr=void 0,n.prototype.br=void 0,n.prototype.bl=void 0,n.prototype.objectLimit=200,n.prototype.minimumSize=3e3,n.prototype.clear=function(){this.objects=[],this.tl&&(this.tl.clear(),this.tr.clear(),this.br.clear(),this.bl.clear())},n.prototype.getObjects=function(){return this.tl?this.objects.concat(this.tl.getObjects(),this.tr.getObjects(),this.br.getObjects(),this.bl.getObjects()):this.objects.slice()},n.prototype.split=function(){var e=this.width/2,t=this.height/2,r=this.left,i=this.top;this.tl=new n(r,i,e,t,this),this.tr=new n(r+e,i,e,t,this),this.br=new n(r+e,i+t,e,t,this),this.bl=new n(r,i+t,e,t,this)},n.prototype.parentNode=function(e){var t=this,n;return e.left<t.left?e.top<t.top?n=t.grow(t.width,t.height):n=t.grow(t.width,0):e.left+e.width>t.left+t.width?e.top<t.top?n=t.grow(0,t.height):n=t.grow(0,0):e.top<t.top?n=t.grow(0,t.height):e.top+e.height>t.top+t.height&&(n=t.grow(0,0)),n?n.parentNode(e):t},n.prototype.getQuadrantAt=function(e,t){if(!this.tl)return this;var n=this.left+this.width/2,r=this.top+this.height/2;return e<n?t<r?this.tl.tl&&this.tl.getQuadrantAt(e,t)||this.tl:this.bl.tl&&this.bl.getQuadrantAt(e,t)||this.bl:t<r?this.tr.tl&&this.tr.getQuadrantAt(e,t)||this.tr:this.br.tl&&this.br.getQuadrantAt(e,t)||this.br},n.prototype.getInteractableObjects=function(e,t,n,r){if(!this.tl)return this.objects.slice();var i=this.getQuadrant(e,t,n,r),s=[i.objects],o=[i],u=i.parent;while(u)s.push(u.objects),o.push(u),u=u.parent;if(i.tl){var a=i.getQuadrantAt(e,t);~o.indexOf(a)||(o.push(a),s.push(a.objects),a.parent&&!~o.indexOf(a.parent)&&(o.push(a.parent),s.push(a.parent.objects))),a=i.getQuadrantAt(e+n,t),~o.indexOf(a)||(o.push(a),s.push(a.objects),a.parent&&!~o.indexOf(a.parent)&&(o.push(a.parent),s.push(a.parent.objects))),a=i.getQuadrantAt(e+n,t+r),~o.indexOf(a)||(o.push(a),s.push(a.objects),a.parent&&!~o.indexOf(a.parent)&&(o.push(a.parent),s.push(a.parent.objects))),a=i.getQuadrantAt(e,t+r),~o.indexOf(a)||(o.push(a),s.push(a.objects),a.parent&&!~o.indexOf(a.parent)&&s.push(a.parent.objects))}return Array.prototype.concat.apply([],s)},n.prototype.getQuadrant=function(e,t,n,r){if(!this.tl)return this;var i=this.left+this.width/2,s=this.top+this.height/2,o=t<s&&t+r<s,u=t>s;if(e<i&&e+n<i){if(o)return this.tl.tl&&this.tl.getQuadrant(e,t,n,r)||this.tl;if(u)return this.bl.tl&&this.bl.getQuadrant(e,t,n,r)||this.bl}else if(e>i){if(o)return this.tr.tl&&this.tr.getQuadrant(e,t,n,r)||this.tr;if(u)return this.br.tl&&this.br.getQuadrant(e,t,n,r)||this.br}return this},n.prototype.insert=function(e){var t,n,r,i,s,o;o=this.parentNode(e),t=o.getQuadrant(e.left,e.top,e.width,e.height);if(t!==o)t.insert(e);else{s=o.objects,s.push(e),n=0,r=s.length;if(!this.isBase&&r>o.objectLimit){o.tl||o.split(),i=[];for(;n<r;n++)e=o.objects[n],t=o.getQuadrant(e.left,e.top,e.width,e.height),t!==o?t.insert(e):i.push(e);o.objects=i}}return o},n.prototype.grow=function(e,t){var r=this.left-e,i=this.top-t,s=new n(r,i,this.width*2,this.height*2);return this.parent=s,e?t?s.br=this:s.tr=this:t?s.bl=this:s.tl=this,s.tl=s.tl||new n(r,i,this.width,this.height,this),s.tr=s.tr||new n(r+this.width,i,this.width,this.height,this),s.br=s.br||new n(r+this.width,i+this.height,this.width,this.height,this),s.bl=s.bl||new n(r,i+this.height,this.width,this.height,this),s},e.exports}({},{}),t=function(t,n){function s(e,t,n,r,i){return e.left<=t&&e.top<=n&&e.right>=r&&e.bottom>=i}function o(e,t,n,r,i){if(!i.tl)return i;if(e<i.tr.left){if(n<i.tr.left){if(r<i.bl.top)return o(e,t,n,r,i.tl);if(t>i.bl.top)return o(e,t,n,r,i.bl)}}else{if(r<i.br.top)return o(e,t,n,r,i.tr);if(t>i.br.top)return o(e,t,n,r,i.br)}return i}t.exports=n;var r=e,i=t.exports=function(e,t){e&&(this.width=e,this.height=t?t:e),window.q=this,this.reset()};return i.create=function(e,t){var n=new i(e,t);return i.getApi(n)},i.getApi=function(e){var t={};return t.insert=e.insert.bind(e),t.reset=e.reset.bind(e),t.getObjects=e.getObjects.bind(e),t.prune=e.prune.bind(e),t},i.prototype.width=1e4,i.prototype.height=1e4,i.prototype.reset=function(e,t){e=e||0,t=t||0;var n=-(this.width/2),i=-(this.height/2);this.top=new r(e,t,this.width,this.height)},i.prototype.insert=function(e){this.top=this.top.insert(e)},i.prototype.getContainingNode=function(e,t,n,r,i){if(e<this.top.left||t<this.top.top||n>this.top.right||r>this.top.bottom)return;return o(e,t,n,r,this.top)},i.prototype.minimumSize=3e3,i.prototype.getInteractableObjects=function(e,t,n,r){function h(e,t,n,r){var s=i.getContainingNode(e,t,n,r);s&&!~l.indexOf(s.objects)&&l.push(s.objects)}var i=this,s=this.minimumSize,o=this.getContainingNode(e,t,e+1,t+1),u,a,f,l=o?[o.getObjects()]:[],c;return!o||o.right<n?(u=this.getContainingNode(n-1,t,n,t+1),u?l.push(u.getObjects()):u=o):u=o,!o||o.bottom<r?(a=this.getContainingNode(e,r-1,e+1,r),a?l.push(a.getObjects()):a=o):a=o,!u||u.bottom<r?!a||a.right<n?(f=this.getContainingNode(n-1,r-1,n,r),f?l.push(f.getObjects()):f=a):f=a:f=u,o!==u&&h(e,t,n,t+1),u!==f&&h(n-1,t,n,r),f!==a&&h(e,r-1,n,r),a!==o&&h(e,t,e+1,r),o&&(e-s<o.left&&h(e-s,t,e+1,t+1),t-s<o.top&&h(e,t-s,e+1,t+1)),u&&(u!==o&&t-s<u.top&&h(n-1,t-s,n,t+1),n+s>u.right&&h(n-1,t,n+s,t+1)),f&&(f!==u&&n+s>f.right&&h(n-1,r-1,n+s,r),r+s>f.bottom&&h(n-1,r-1,n,r+s)),a&&(a!==f&&r+s>a.bottom&&h(e,r-1,e+1,r+s),a!==o&&e-s<a.left&&h(e-s,r-1,e+1,r)),Array.prototype.concat.apply([],l)},i.prototype.getObjects=function(e,t,n,r){if(e!==void 0){var i=t+r,s=e+n,o=this.getInteractableObjects(e,t,s,i),u=o.length,a=[],f;while(u--)f=o[u],(t<=f.top?i>=f.top:f.bottom>=t)&&(e<=f.left?s>=f.left:f.right>=e)&&a.push(f);return a}return this.top.getObjects()},i.prototype.prune=function(e,t,n,r){var i=e+n,s=t+r,o,u=[];keptObjects=[];var a=this.top.getObjects(),f=0,l=a.length;for(;f<l;f++)o=a[f],o.left<e||o.top<t||o.left+o.width>i||o.top+o.height>s?u.push(o):keptObjects.push(o);if(keptObjects.length){this.reset(keptObjects[0].left,keptObjects[0].top),f=0,l=keptObjects.length;for(;f<l;f++)this.insert(keptObjects[f])}else this.reset();return u},t.exports}({},{});return t}();